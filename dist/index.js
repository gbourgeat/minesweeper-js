(()=>{"use strict";var e={56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},72:e=>{var n=[];function t(e){for(var t=-1,i=0;i<n.length;i++)if(n[i].identifier===e){t=i;break}return t}function i(e,i){for(var a={},s=[],o=0;o<e.length;o++){var c=e[o],l=i.base?c[0]+i.base:c[0],d=a[l]||0,h="".concat(l," ").concat(d);a[l]=d+1;var u=t(h),g={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)n[u].references++,n[u].updater(g);else{var m=r(g,i);i.byIndex=o,n.splice(o,0,{identifier:h,updater:m,references:1})}s.push(h)}return s}function r(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,r){var a=i(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var o=t(a[s]);n[o].references--}for(var c=i(e,r),l=0;l<a.length;l++){var d=t(a[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}a=c}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},202:(e,n,t)=>{t.d(n,{A:()=>o});var i=t(601),r=t.n(i),a=t(314),s=t.n(a)()(r());s.push([e.id,'.minesweeper-container .grid .cell {\n    position: relative;\n    display: block;\n    width: 45px;\n    height: 45px;\n    float: left;\n    border: solid 1px #a6a6a6;\n    background-image: linear-gradient(#c8c8c8, #bdbdbd);\n    border-radius: 5px;\n    margin-right: 2px;\n    margin-bottom: 2px;\n}\n\n.minesweeper-container .grid .cell::after {\n    position: absolute;\n    font-weight: bold;\n    font-size: 25px;\n    width: 45px;\n    height: 45px;\n    text-align: center;\n    line-height: 45px;\n}\n\n.minesweeper-container .grid .cell.cell-undiscovered {\n    background-image: linear-gradient(#E5E5E5, #CFCFCF);\n}\n.minesweeper-container .grid .cell.cell-undiscovered:hover {\n    cursor: pointer;\n    background-image: linear-gradient(#c9d0e6, #CFCFCF);\n}\n\n.minesweeper-container .grid .cell[data-count-mines]::after {\n    content: attr(data-count-mines);\n}\n.minesweeper-container .grid .cell[data-count-mines="0"]::after {\n    content: "";\n}\n.minesweeper-container .grid .cell[data-count-mines="1"]::after {\n    color: #1633c3;\n}\n.minesweeper-container .grid .cell[data-count-mines="2"]::after {\n    color: #488331;\n}\n.minesweeper-container .grid .cell[data-count-mines="3"]::after {\n    color: #bd0d0d;\n}\n.minesweeper-container .grid .cell[data-count-mines="4"]::after {\n    color: #cc6b21;\n}\n.minesweeper-container .grid .cell[data-count-mines="5"]::after {\n    color: #0b82b6;\n}\n.minesweeper-container .grid .cell[data-count-mines="6"]::after {\n    color: #73c6ec;\n}\n.minesweeper-container .grid .cell[data-count-mines="7"]::after {\n    color: #d8a013;\n}\n.minesweeper-container .grid .cell[data-count-mines="8"]::after {\n    color: #ab06c1;\n}\n\n.minesweeper-container .grid .cell.cell-discovered.cell-mined::after  {\n    content: "☢";\n    color: #e63744;\n}\n\n/* FLAGGED UNDISCOVERED */\n.minesweeper-container .grid .cell.cell-undiscovered.cell-flagged {\n    background-image: linear-gradient(#93003a, #4a0404);\n}\n.minesweeper-container .grid .cell.cell-undiscovered.cell-flagged::after {\n    content: "⚚";\n    color: white;\n}\n\n/* FLAGGED DISCOVERED WITHOUT MINE */\n.minesweeper-container .grid .cell.cell-discovered.cell-flagged.cell-empty {\n    background-image: linear-gradient(#373737, #000000);\n}\n.minesweeper-container .grid .cell.cell-discovered.cell-flagged.cell-empty::after {\n    content: "☢";\n    color: red;\n}\n\n/* FLAGGED DISCOVERED WITH MINE */\n.minesweeper-container .grid .cell.cell-discovered.cell-flagged.cell-mined {\n    background-image: linear-gradient(#3d8a0f, #46680a);\n}\n.minesweeper-container .grid .cell.cell-discovered.cell-flagged.cell-mined::after {\n    content: "☢";\n    color: white;\n}',""]);const o=s},274:(e,n,t)=>{t.d(n,{A:()=>o});var i=t(601),r=t.n(i),a=t(314),s=t.n(a)()(r());s.push([e.id,".minesweeper-container .flag-remainder {\n}",""]);const o=s},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",i=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),i&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),i&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,i,r,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(i)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);i&&s[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),n.push(d))}},n}},365:(e,n,t)=>{t.d(n,{A:()=>u});var i=t(601),r=t.n(i),a=t(314),s=t.n(a),o=t(948),c=t(274),l=t(395),d=t(202),h=s()(r());h.i(o.A),h.i(c.A),h.i(l.A),h.i(d.A),h.push([e.id,'* {\n    margin: 0;\n    padding: 0;\n}\n\nbody {\n    text-align: center;\n    font-family: "Roboto", sans-serif;\n}',""]);const u=h},395:(e,n,t)=>{t.d(n,{A:()=>o});var i=t(601),r=t.n(i),a=t(314),s=t.n(a)()(r());s.push([e.id,".minesweeper-container .timer {\n    font-weight: bold;\n    font-size: 50px;\n}",""]);const o=s},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var n={};e.exports=function(e,t){var i=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var i="";t.supports&&(i+="@supports (".concat(t.supports,") {")),t.media&&(i+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(i+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),i+=t.css,r&&(i+="}"),t.media&&(i+="}"),t.supports&&(i+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(i,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},948:(e,n,t)=>{t.d(n,{A:()=>o});var i=t(601),r=t.n(i),a=t(314),s=t.n(a)()(r());s.push([e.id,".minesweeper-container {\n    display: inline-block;\n    margin: 0 auto;\n    padding: 4px;\n}\n\n.minesweeper-container * {\n    text-align: left;\n    user-select: none;\n}",""]);const o=s}},n={};function t(i){var r=n[i];if(void 0!==r)return r.exports;var a=n[i]={id:i,exports:{}};return e[i](a,a.exports,t),a.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0;class i{char;_position;_isDiscovered=!1;_isMine=!1;_isFlagged=!1;_numberOfAdjacentMines=0;constructor(e,n){this.char=e,this._position=n,"*"===e?this._isMine=!0:this._numberOfAdjacentMines=parseInt(e,10)}static create(e,n){return new i(e,n)}discover(){this._isDiscovered=!0}toggleFlag(){this._isFlagged=!this._isFlagged}isFlagged(){return this._isFlagged}isDiscovered(){return this._isDiscovered}position(){return this._position}isMined(){return this._isMine}numberOfAdjacentMines(){return this._numberOfAdjacentMines}isAdjacent(e){return this.position().adjacent(e.position())}}class r{_x;_y;constructor(e,n){this._x=e,this._y=n}static create(e,n){return new r(e,n)}x(){return this._x}y(){return this._y}adjacent(e){return this.y()===e.y()?1===Math.abs(e.x()-this.x()):1===Math.abs(e.y()-this.y())&&[0,1].includes(Math.abs(e.x()-this.x()))}equals(e){return e.x()===this.x()&&e.y()===this.y()}}class a{static generate(e,n,t){const i=e*n,r=Math.floor(i/100*t),a=i-r,c=Array(r).fill("*"),l=Array(a).fill("."),d=c.concat(l),h=this.shuffle(d),u=function(e){const n=e.split("\n").map((e=>e.split("")));return n.map(((e,t)=>e.map(((e,i)=>o(e)?"*":function(e,n,t){let i=0;const r=e[n],a=function(e,n){return e?n[e-1]:null}(n,e);a&&(i+=s(a,t));const o=function(e,n){return e===n.length-1?null:n[e+1]}(n,e);return o&&(i+=s(o,t)),i+=s(r,t),i}(n,t,i))).join(""))).join("\n")}(this.chunk(h,e).map((e=>e.join(""))).join("\n"));return this.parse(u)}static shuffle(e){let n=e.length;for(;0!=n;){let t=Math.floor(Math.random()*n);n--,[e[n],e[t]]=[e[t],e[n]]}return e}static chunk(e,n){const t=[];for(let i=0;i<e.length;i+=n)t.push(e.slice(i,i+n));return t}static parse(e){const n=[],t=e.split("\n");for(const[e,a]of t.entries()){const t=a.split("");for(const[a,s]of t.entries())n.push(i.create(s,r.create(a,e)))}return n}}function s(e,n){return[o(e[n]),n>0&&o(e[n-1]),n<e.length&&o(e[n+1])].reduce(((e,n)=>e+(n?1:0)),0)}const o=e=>"*"===e;class c{_cells;_minesCount;_onLooseCallback=()=>{};_onWinCallback=()=>{};_onFlagCallback=()=>{};_onStartCallback=()=>{};_started=!1;_loose=!1;_discoveredCounter=0;_flagCounter=0;constructor(e,n){this._cells=e,this._minesCount=n}static create(e,n,t){const i=a.generate(e,n,t),r=i.reduce(((e,n)=>e+(n.isMined()?1:0)),0);return new c(i,r)}cells(){return this._cells}remainingFlag(){const e=this._minesCount-this._flagCounter;return e>=0?e:0}discover(e){if(!(this._loose||e.isFlagged()||e.isDiscovered()))return this._started||(this._started=!0,this.onStart()),e.discover(),this._discoveredCounter++,e.isMined()?this.onLoose():(e.isFlagged()||e.numberOfAdjacentMines()||this.revealEmptyAdjacentCells(e),0==this._cells.length-(this._discoveredCounter+this._flagCounter)?this.onWin():void 0)}revealEmptyAdjacentCells(e){const n=this.findAdjacentCells(e).filter((e=>!e.isDiscovered()));n.forEach((e=>{this.discover(e)}))}findAdjacentCells(e){return this.cells().filter((n=>e.isAdjacent(n)))}flag(e){if(!this._loose&&!e.isDiscovered())return e.toggleFlag(),e.isFlagged()?this._flagCounter++:this._flagCounter--,this.onFlag(),0==this._cells.length-(this._discoveredCounter+this._flagCounter)?this.onWin():void 0}handleLoose(e){this._onLooseCallback=e}onLoose(){this._loose=!0,this.revealMines(),this.revealFlags(),this._onLooseCallback()}revealMines(){this.cells().filter((e=>!e.isDiscovered()&&e.isMined())).forEach((e=>e.discover()))}revealFlags(){this.cells().filter((e=>!e.isDiscovered()&&e.isFlagged())).forEach((e=>e.discover()))}handleWin(e){this._onWinCallback=e}onWin(){this.revealFlags(),this._onWinCallback()}handleFlag(e){this._onFlagCallback=e}onFlag(){this._onFlagCallback()}handleStart(e){this._onStartCallback=e}onStart(){this._onStartCallback()}}class l{intervalId=null;tickCallback=()=>{};duration;start(){if(null!==this.intervalId)return;const e=(new Date).getTime();this.duration=0,this.intervalId=setInterval((()=>{const n=(new Date).getTime();this.duration=Math.floor((n-e)/1e3),this.tickCallback(this.duration)}),100)}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}handleTick(e){this.tickCallback=e}}class d{grid;container;matrice;constructor(e,n){this.grid=e,this.container=n}render(){this.matrice=this.grid.cells();const e=Math.max(...this.matrice.map((e=>e.position().x()))),n=this.createMatriceHTMLElement();let t=0,i=this.createRowHTMLElement(t++);for(const[r,a]of this.matrice.entries())i.appendChild(this.createCellHTMLElement(a)),a.position().x()===e&&(n.appendChild(i),r!==this.matrice.length-1&&(i=this.createRowHTMLElement(t++)));this.clearContainer(),this.container.appendChild(n)}clearContainer(){this.container.firstChild&&this.container.firstChild.remove()}createMatriceHTMLElement(){const e=document.createElement("div");return e.classList.add("matrice"),e}createRowHTMLElement(e){const n=document.createElement("div");return n.classList.add("row"),n.id=`row-${e}`,n}createCellHTMLElement(e){const n=document.createElement("div");return n.classList.add("cell"),n.dataset.x=e.position().x().toString(),n.dataset.y=e.position().y().toString(),n.id=`cell-${e.position().x()}-${e.position().y()}`,e.isFlagged()&&n.classList.add("cell-flagged"),e.isDiscovered()?(n.classList.add("cell-discovered"),e.isMined()?n.classList.add("cell-mined"):(n.classList.add("cell-empty"),n.dataset.countMines=e.numberOfAdjacentMines().toString())):n.classList.add("cell-undiscovered"),e.isDiscovered()||(n.addEventListener("click",(n=>{n.preventDefault(),this.grid.discover(e),this.render()})),n.addEventListener("contextmenu",(n=>{n.preventDefault(),this.grid.flag(e),this.render()}))),n}}class h{timer;container;constructor(e,n){this.timer=e,this.container=n}render(){this.container.innerHTML=this.formatToMinutes(0),this.timer.handleTick((e=>{this.container.innerHTML=this.formatToMinutes(e)}))}formatToMinutes(e){const n=Math.floor(e/60),t=Math.floor(e-60*n).toString().padStart(2,"0");return`${n.toString().padStart(2,"0")}:${t}`}}class u{grid;container;constructor(e,n){this.grid=e,this.container=n}render(){this.container.innerHTML="Remaining flag : "+this.grid.remainingFlag(),this.grid.handleFlag((()=>{this.container.innerHTML="Remaining flag : "+this.grid.remainingFlag()}))}}class g{containerId;grid;timer;constructor(e,n,t){this.containerId=e,this.grid=n,this.timer=t}render(){const e=document.getElementById(this.containerId);this.clearContainer(e),e.classList.add("minesweeper-container");const n=this.createGridHTMLElement(e),t=new d(this.grid,n),i=this.createTimerHTMLElement(e),r=new h(this.timer,i),a=this.createFlagRemainderHTMLElement(e),s=new u(this.grid,a);r.render(),s.render(),t.render()}clearContainer(e){if(e.children.length)for(;e.children.length;)e.removeChild(e.firstChild)}createTimerHTMLElement(e){const n=document.createElement("div");return n.id="minesweeper-timer",n.classList.add("timer"),e.prepend(n),n}createFlagRemainderHTMLElement(e){const n=document.createElement("div");return n.id="minesweeper-flags",n.classList.add("flags"),e.prepend(n),n}createGridHTMLElement(e){const n=document.createElement("div");return n.id="minesweeper-grid",n.classList.add("grid"),e.append(n),n}}class m{config;timer;_handleStartCallback=()=>{};_handleWinCallback=()=>{};_handleLooseCallback=()=>{};constructor(e){this.config=e}init(){const e=this.config.gridDimensions,n=c.create(e.width,e.height,this.config.difficulty);this.timer=new l,new g(this.config.containerId,n,this.timer).render(),n.handleStart((()=>{this.timer.start(),this._handleStartCallback()})),n.handleWin((()=>{this.timer.stop(),this._handleWinCallback()})),n.handleLoose((()=>{this.timer.stop(),this._handleLooseCallback()}))}}var p=t(72),f=t.n(p),v=t(825),b=t.n(v),C=t(659),_=t.n(C),w=t(56),y=t.n(w),M=t(540),E=t.n(M),x=t(113),L=t.n(x),k=t(365),F={};F.styleTagTransform=L(),F.setAttributes=y(),F.insert=_().bind(null,"head"),F.domAPI=b(),F.insertStyleElement=E(),f()(k.A,F),k.A&&k.A.locals&&k.A.locals,(e=>{let n;e.getElementById("start-btn").addEventListener("click",(()=>{const t=e.getElementById("width").value,i=e.getElementById("height").value,r=e.getElementById("difficulty").value,a={containerId:"minesweeper-container",gridDimensions:{height:parseInt(i),width:parseInt(t)},difficulty:parseInt(r)};n=new m(a),n.init()}))})(document)})();